<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Wer küsst wen?</title>
  <link rel="stylesheet" href="style/bootstrap.min.css">
  <link rel="stylesheet" href="style/wer-kuesst-wen.css" type="text/css" charset="utf-8">
</head>
<body>
  <div id="halfviz">
    <canvas id="viewport" width="800" height="600"></canvas>
    <div id="editor" class="well">
      <div class="io">
        <div class="ctrl">
          <h2>Person</h2>

          <label for="node_urls">URLs</label>
          <textarea id="node_urls" rows=2 title="Ein URL pro Zeile"></textarea>

          <label for="node_names">Namen</label>
          <textarea id="node_names" rows=2 title="Ein Name pro Zeile"></textarea>

          <button id="clear_text" class="btn success" disabled>Neu</button>
          <button id="update_node" class="btn primary add" disabled>Speichern</button>
          <button id="remove_node" class="btn danger remove" disabled>
            <span class="selected_name">Person</span> entfernen
          </button>
        </div>
        <div>
          <h2>Erfahrungen</h2>
          <h3><span id="relationship-list-name" class="selected_name">Person</span> küsste:</h3>
          <ul id="relationship-list">
          </ul>

          <button id="show_edge_form" class="btn success" disabled>Neue Knutscherei mit <span id="relationship-list-name" class="selected_name">Person</span></button>

          <div id="edge_form">
            <label for="edge_node">Name / URL</label>
            <input id="edge_node" type="text">

            <button id="add_edge" class="btn primary add">Knutscherei mit <span id="relationship-list-name" class="selected_name">Person</span> speichern</button>
          </div>
        </div>
        <div>
          <h2>Empfehlungen</h2>
          <p>
            Kunden, die <span class="selected_name">Person</span> küssten, kauften auch:
          </p>
          <table class="zebra-striped">
            <thead>
              <th>Name</th>
              <th>absolut</th>
              <th>prozentual</th>
            </thead>
            <tbody id="analysis-table">
            </tbody>
          </table>
        </div>
        <div>
          <h2>Rohdaten</h2>
          <p>
            Die Beschreibung des Graphen ist als <abbr title="Javascript Object Notation">JSON</abbr> verfügbar.
          </p>
          <button id="data_export" class="btn primary">Daten exportieren</button>
        </div>
        <script>
          function reset(){
            sys.eachNode(function(node, pt){
              sys.pruneNode(node)
            })
            json = '{"nodes": {"DD04D708-4E47-4F8A-8217-55FF894D9E0E": {"names": ["Dora"],"urls": ["http://twitter.com/dorabianchi"]},"705891E7-52CC-421F-9E86-DA6E71918383": {"names": ["Marten"],"urls": ["http://twitter.com/martenreed"]},"28B35AA4-ED1C-48E6-9CDC-89F1B02AEDC7": {"names": ["Faye"],"urls": ["http://twitter.com/fayewhitaker"]},"561BA651-1ABC-4C08-ADBE-DF4F03F970D1": {"names": ["Marigold"],"urls": ["http://twitter.com/marigoldfarmer"]},"79147D57-AF63-4BA8-9326-EAB04F290FAD": {"names": ["Sven"],"urls": ["http://twitter.com/svenbianchi"]}},"edges": {"705891E7-52CC-421F-9E86-DA6E71918383": {"DD04D708-4E47-4F8A-8217-55FF894D9E0E": {}},"DD04D708-4E47-4F8A-8217-55FF894D9E0E": {"705891E7-52CC-421F-9E86-DA6E71918383": {}},"79147D57-AF63-4BA8-9326-EAB04F290FAD": {"28B35AA4-ED1C-48E6-9CDC-89F1B02AEDC7": {}},"28B35AA4-ED1C-48E6-9CDC-89F1B02AEDC7": {"79147D57-AF63-4BA8-9326-EAB04F290FAD": {}}}}'
            sys.merge(JSON.parse(json))
            sys.save()
          }
        </script>
        <button id=reset class="btn danger" onclick="javascript:reset()">
          <b>Nuklearangriff aus dem Orbit</b>
        </button>
      </div>
    </div>
    <div id="grabber"></div>
  </div>  

  <script src="lib/jquery.1.4.4.min.js"></script>
  <script src="lib/arbor.js"></script>
  <script src="lib/graphics.js"></script>
  <script src="lib/parseuri.js"></script>
  <script src="lib/Math.uuid.js"></script>

  <!-- the halfviz source, broken out one ‘class’ per file -->
  <script src="src/help.js"></script>
  <script src="src/io.js"></script>
  <script src="src/renderer.js"></script>
  
  <!-- the main driver code: start here -->
  <script src="src/halfviz.js"></script> 

  <!-- bootstrap stuff -->
  <script src="lib/bootstrap-twipsy.js"></script>
  <script>
    options = {
      offset:2,
      trigger:'focus'
    }
    $('#node_urls').twipsy(options)
    $('#node_names').twipsy(options)

    $('#edge_form').toggle()
  </script>
</body>
</html>
